<!DOCTYPE html>
<!--
  Copyright 2019 Google LLC

  Use of this source code is governed by an MIT-style
  license that can be found in the LICENSE file or at
  https://opensource.org/licenses/MIT.
-->
<html>
<head>
  <meta charset="utf-8">
  <title>Workbox SW Unit Tests</title>

  <!-- Uncomment when locally running the module versions. -->
  <script>self.process = self.process || {env: {NODE_ENV: '{{ ENV }}'}};</script>
</head>
<body>
  <p>Open the console to see test results.</p>
  <script type="module">
    import {Workbox} from '/packages/workbox-window/Workbox.mjs';

    // // Randomize the test URL so every test run forces a new SW install.
    const wb = new Workbox('./index.js.njk?v=' + Math.random());

    wb.register();

    wb.addEventListener('message', (event) => {
      if (event.data.type === 'WINDOW_TEST_RESULTS') {
        window.mochaResults = event.data.payload;
      }
    });
  </script>
</body>
</html>
